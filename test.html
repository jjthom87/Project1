<!-- Purpose of this application is to simply "dump" JSON data about selected movies into the HTML -->
<html>
<head>
	<title>Ticketmaster</title>
	<!-- Latest compiled and minified CSS -->
</head>
<body>

<div class="container">
  <h1>Event Search</h1>


  <!-- This form will be where users input data about the movies -->
  <form id="ticketForm">
    <label for="ticket-input">Search for an Event</label>
    <input type="text" id="keywordInput"><br>
    <input type="text" id="totalResultsInput"><br>

    
    <!-- This button will trigger our AJAX call -->
    <input id="findTicket" type="submit" value="Ticket Search">
  </form>

    <div id="searchResults"></div>

<script src='http://code.jquery.com/jquery-2.1.3.min.js'></script>
<script type="text/javascript">

var apiKey = 'Ob5H8KKC0dIz2nM9oeE2GX3fNoCRFHZE';

	// This .on("click") function will trigger the AJAX Call
	$('#ticketForm').on('submit', function(){

    $('#searchResults').empty();

		// Here we grab the text from the input box 
		var keyword = $('#keywordInput').val();
    var totalResults = $('#totalResultsInput').val();
    console.log(totalResults);

		// Here we assemble our URL 
		var queryURL = 'https://app.ticketmaster.com/discovery/v2/events.json?' +
    'apikey=' + apiKey + '&' +
    'keyword=' + keyword + '&' +
    'size=' + totalResults;


    console.log('the queryURL is working: ' + queryURL);

		//------look up how to convert an object to a string

		// Write code between the dashes below to hit the queryURL with $ajax, then take the response data and display it in the div with an id of movieView
		// YOUR CODE GOES IN THESE DASHES. DO NOT MANUALLY TOUCH THE HTML ABOVE.
        $.ajax({
            url: queryURL,
            type: 'GET',
            async: true,
            dataType: "json"
        })
        .done(function(response) {

          var results = response;
          console.log(results);

          for (var i=0 ; i < totalResults; i++) {

            var eventName = JSON.stringify(results._embedded.events[i].name)
            console.log('End results is: ' + eventName);
            var newDiv = $('<div>');
            newDiv.append(eventName);
            $('#searchResults').append(newDiv);

            console.log('Query URL is:' + queryURL);
          }
        });
		//----
		return false;
	})

</script>


</body>
</html>
